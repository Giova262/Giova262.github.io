"use strict";(globalThis["webpackChunkquasar_project"]=globalThis["webpackChunkquasar_project"]||[]).push([[461],{7013:(e,t,a)=>{a.r(t),a.d(t,{default:()=>le});var s=a(9835);const o={class:"fit"};function l(e,t,a,l,n,r){const i=(0,s.up)("PersonasList"),c=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(c,null,{default:(0,s.w5)((()=>[(0,s._)("div",o,[(0,s.Wm)(i)])])),_:1})}var n=a(6970),r=a(9742),i=a.n(r);const c={class:"row justify-between"},u={class:"q-py-sm"},d={class:"row items-center"},m={class:"row items-center"},w={class:"row items-center full-width"},p={class:"col q-pr-md"},g={class:"col-9 q-px-none"},f={key:0},_=(0,s._)("span",{class:"text-grey-7 q-pr-xs"},"Estado:",-1),h={class:"col text-green-5 text-bold"},x={key:1},v=(0,s._)("span",{class:"text-grey-7 q-pr-xs"},"Estado:",-1),q={class:"col text-red-5 text-bold"},y={key:2},b=(0,s._)("span",{class:"text-grey-7 q-pr-xs"},"Estado:",-1),L={class:"col text-grey-8 text-bold"},k={class:"col text-right"},C={class:"text-weight-medium q-pr-sm"},Z={class:"text-grey-6 q-pr-xs"},W={class:"text-grey-6"},z={class:"text-grey-6 q-pl-xs"};function S(e,t,a,o,l,r){const S=(0,s.up)("q-badge"),I=(0,s.up)("q-tooltip"),R=(0,s.up)("q-icon"),T=(0,s.up)("q-item-label"),j=(0,s.up)("q-input"),D=(0,s.up)("q-img"),Q=(0,s.up)("q-item-section"),A=(0,s.up)("q-item"),E=(0,s.up)("q-slide-item"),O=(0,s.up)("q-virtual-scroll"),P=(0,s.up)("q-page");return e.isReady?((0,s.wg)(),(0,s.j4)(P,{key:0,class:"q-pa-sm bg-grey-3"},{default:(0,s.w5)((()=>[(0,s.Wm)(T,{overline:"",class:"text-uppercase bg-blue-1 text-blue-grey-8 text-weight-medium q-px-md"},{default:(0,s.w5)((()=>[(0,s._)("div",c,[(0,s._)("div",u,[(0,s.Uk)(" Miembros "),(0,s.Wm)(S,{color:"primary",class:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(e.personasList.length),1)])),_:1}),e.searchText?((0,s.wg)(),(0,s.j4)(S,{key:0,color:"secondary",class:"q-ml-xs"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(e.personasFilteredOut.length),1)])),_:1})):(0,s.kq)("",!0)]),(0,s._)("div",null,[(0,s.Wm)(R,{name:"download",onClick:e.onDownloadClick,class:"cursor-pointer q-py-sm q-mr-md text-green-9",size:"sm"},{default:(0,s.w5)((()=>[(0,s.Wm)(I,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Exportar")])),_:1})])),_:1},8,["onClick"]),(0,s.Wm)(R,{name:"refresh",onClick:e.onRefreshList,class:"cursor-pointer q-py-sm",color:"blue-9",size:"sm"},{default:(0,s.w5)((()=>[(0,s.Wm)(I,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Refrescar")])),_:1})])),_:1},8,["onClick"])])])])),_:1}),(0,s.Wm)(T,{class:"q-pt-xs q-px-xs"},{default:(0,s.w5)((()=>[(0,s.Wm)(j,{modelValue:e.searchText,"onUpdate:modelValue":t[0]||(t[0]=t=>e.searchText=t),rounded:"",dense:"",flat:"",clearable:"",placeholder:"Buscar..",class:"full-width",standout:"bg-blue-4 text-grey-8"},{append:(0,s.w5)((()=>[(0,s.Wm)(R,{name:"search"})])),_:1},8,["modelValue"])])),_:1}),(0,s.Wm)(O,{separator:"",items:e.personasFilteredOut,"virtual-scroll-slice-size":15,style:{"max-height":"80vh"},class:"q-mt-none"},{default:(0,s.w5)((({item:t})=>[((0,s.wg)(),(0,s.j4)(E,{key:t.id,onLeft:a=>e.onLeft(a,t),onRight:a=>e.onRight(a,t),onClick:a=>e.onItemClick(t)},{left:(0,s.w5)((()=>[(0,s._)("div",d,[(0,s.Wm)(R,{left:"",name:"visibility"}),(0,s.Uk)(" Mostrar ")])])),right:(0,s.w5)((()=>[(0,s._)("div",m,[(0,s.Uk)(" Modificar "),(0,s.Wm)(R,{right:"",name:"edit"})])])),default:(0,s.w5)((()=>[(0,s.Wm)(A,{class:"bg-white jg-border-radius q-mt-sm"},{default:(0,s.w5)((()=>[(0,s._)("div",w,[(0,s._)("div",p,[(0,s.Wm)(D,{alt:"Foto",src:t.foto_url,contain:!0,"spinner-color":"green",class:"text-grey-3 q-mr-sm","placeholder-src":i()},null,8,["src"])]),(0,s._)("div",g,[(0,s.Wm)(Q,{class:""},{default:(0,s.w5)((()=>[(0,s.Wm)(T,{class:"text-grey-5 row items-center no-wrap q-mt-xs"},{default:(0,s.w5)((()=>["ACTIVO"===t.estado?((0,s.wg)(),(0,s.iD)("div",f,[_,(0,s._)("span",h,(0,n.zw)(t.estado),1)])):"APARTADO"===t.estado||"PERDIDO"===t.estado||"TODO MAL"===t.estado?((0,s.wg)(),(0,s.iD)("div",x,[v,(0,s._)("span",q,(0,n.zw)(t.estado),1)])):((0,s.wg)(),(0,s.iD)("div",y,[b,(0,s._)("span",L,(0,n.zw)(t.estado),1)])),(0,s._)("span",k,(0,n.zw)(t.iglesia),1)])),_:2},1024),(0,s.Wm)(T,{class:"row items-center text-uppercase no-wrap q-mt-xs"},{default:(0,s.w5)((()=>[(0,s._)("span",C,(0,n.zw)(t.nombre)+" "+(0,n.zw)(t.apellido),1),(0,s._)("span",Z,"("+(0,n.zw)(t.edad||"?")+")",1),(0,s._)("span",W," ("+(0,n.zw)(t.sexo.codigo)+")",1),(0,s._)("span",z,[t.bautizado?((0,s.wg)(),(0,s.j4)(R,{key:0,color:"green-5",name:"done"})):(0,s.kq)("",!0)])])),_:2},1024),(0,s.Wm)(T,{caption:"",class:"row justify-between items-center"},{default:(0,s.w5)((()=>[(0,s._)("span",null,[(0,s.Wm)(R,{name:"place",class:"q-mr-none"}),(0,s.Uk)(" "+(0,n.zw)(t.direccion||"No ingresada"),1)])])),_:2},1024),(0,s.Wm)(T,{class:"row justify-between items-center text-grey-6"},{default:(0,s.w5)((()=>[(0,s._)("span",null,"Telf: "+(0,n.zw)(t.telefono),1),(0,s._)("span",null,"Ingreso: "+(0,n.zw)(t.fecha_ingreso),1)])),_:2},1024),(0,s.Wm)(T,{class:"row justify-between items-center text-grey-6"},{default:(0,s.w5)((()=>[(0,s._)("span",null,"Correo: "+(0,n.zw)(t.email),1)])),_:2},1024)])),_:2},1024)])])])),_:2},1024)])),_:2},1032,["onLeft","onRight","onClick"]))])),_:1},8,["items"])])),_:1})):(0,s.kq)("",!0)}a(9665);var I=a(499),R=a(9302),T=a(8339),j=a(26),D=a(1033),Q=a(2850),A=a(389),E=a(3331),O=a(9357);const P=(0,s.aZ)({name:"Persona_List",components:{PersonaInputs:j.Z},props:{},setup(){(0,R.Z)();const e=(0,I.iH)(!1),t=(0,T.tv)();let a;const o=(0,I.iH)([]),l=(0,I.iH)(null),n=(0,s.Fl)((()=>{let e=l.value?r():o.value;return e}));function r(){return o.value.filter((e=>e.nombre&&e.nombre.toLowerCase().includes(l.value.toString().toLowerCase())||e.apellido&&e.apellido.toLowerCase().includes(l.value.toString().toLowerCase())||e.edad&&e.edad.toLowerCase().includes(l.value.toString().toLowerCase())||e.email&&e.email.toLowerCase().includes(l.value.toString().toLowerCase())||e.direccion&&e.direccion.toLowerCase().includes(l.value.toString().toLowerCase())||e.bautizado&&e.bautizado.toLowerCase().includes(l.value.toString().toLowerCase())||e.iglesia&&e.iglesia.toLowerCase().includes(l.value.toString().toLowerCase())||e.estado&&e.estado.toLowerCase().includes(l.value.toString().toLowerCase())||e.telefono&&e.telefono.toString().toLowerCase().includes(l.value.toString().toLowerCase())))}function i(e){a=setTimeout((()=>{e()}),1e3)}function c({reset:e},a){a.saveLocalStorage(),i(e),t.push({name:"details"}).catch((()=>{}))}function u({reset:e},a){a.saveLocalStorage(),i(e),t.push({name:"edit"}).catch((()=>{}))}function d(e){e.saveLocalStorage(),t.push({name:"details"}).catch((()=>{}))}async function m(){await D.Z.setAuthEncabezado();const e=await D.Z.getAll();e&&(await E.Z.migrar(e.data),await w())}async function w(){const e=await E.Z.getAllFiltrado("EN REVISION");o.value=[];for(let t=0;t<e.length;t++){let a=e[t];a.id=a.id_persona;const s=new Q.Z;await s.cargarDatos(a),o.value.push(s)}}async function p(){await m()}async function g(){const e=await E.Z.getAll();if(0===e.length)return void(0,A.Y8)("No hay datos para exportar");let t=[];for(var a in e[0])t.push({field:a,filter:"text",filterable:!0,orden:"1",title:a,width:"200"});(0,O.saveExcel)({fileName:`SantuarioMundialDeLosMilagros Registro de personas - ${new Date}`,data:e,columns:t})}return(0,s.bv)((async()=>{await w(),e.value=!0})),(0,s.Jd)((()=>{clearTimeout(a)})),{onLeft:c,onRight:u,onItemClick:d,onRefreshList:p,onDownloadClick:g,isReady:e,personasList:o,personasFilteredOut:n,searchText:l}}});var U=a(1639),F=a(9885),M=a(3115),V=a(990),N=a(2857),H=a(6858),B=a(3119),J=a(8978),Y=a(8713),$=a(490),G=a(335),K=a(1233),X=a(9984),ee=a.n(X);const te=(0,U.Z)(P,[["render",S]]),ae=te;ee()(P,"components",{QPage:F.Z,QItemLabel:M.Z,QBadge:V.Z,QIcon:N.Z,QTooltip:H.Z,QInput:B.Z,QVirtualScroll:J.Z,QSlideItem:Y.Z,QItem:$.Z,QImg:G.Z,QItemSection:K.Z});const se=(0,s.aZ)({name:"PersonaShow",components:{PersonasList:ae}}),oe=(0,U.Z)(se,[["render",l]]),le=oe;ee()(se,"components",{QPage:F.Z})}}]);