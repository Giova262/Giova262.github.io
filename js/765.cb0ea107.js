"use strict";(globalThis["webpackChunkquasar_project"]=globalThis["webpackChunkquasar_project"]||[]).push([[765],{9765:(e,a,s)=>{s.r(a),s.d(a,{default:()=>ee});var t=s(9835);const o={class:"lt-sm contenedor"},n={class:"gt-xs contenedor"};function r(e,a,s,r,l,i){const c=(0,t.up)("LoginFormMobile"),u=(0,t.up)("LoginFormDesktop"),d=(0,t.up)("q-layout");return(0,t.wg)(),(0,t.j4)(d,{view:"lHh Lpr lFf",class:"bg-white"},{default:(0,t.w5)((()=>[(0,t._)("div",o,[(0,t.Wm)(c)]),(0,t._)("div",n,[(0,t.Wm)(u)])])),_:1})}var l=s(6970),i=s(213),c=s.n(i);const u=e=>((0,t.dD)("data-v-17ace55e"),e=e(),(0,t.Cn)(),e),d={class:"q-pa-none q-ma-none q-pt-md"},m=u((()=>(0,t._)("div",{class:"shadow-6 q-py-md bg-grey-3 jg-border-radius-2"},[(0,t._)("div",{class:"text-center text-grey-9 text-weight-bolder"},[(0,t._)("img",{src:c(),style:{width:"240px"}}),(0,t._)("div",{class:"jg-text-18 text-bold q-mt-md"}," Santuario Mundial de los Milagros ")])],-1))),g={class:"div-1 q-mb-sm q-mb-lg jg-border-radius-2 q-mt-sm"},p={class:"col-12 text-center"},w={class:"text-caption text-center text-grey-2 q-mt-xs text-weight-light q-pt-sm"};function y(e,a,s,o,n,r){const i=(0,t.up)("q-input"),c=(0,t.up)("q-icon"),u=(0,t.up)("q-btn"),y=(0,t.up)("q-layout");return(0,t.wg)(),(0,t.j4)(y,null,{default:(0,t.w5)((()=>[e.isLoading?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(y,{key:0,class:"bg-caja shadow-20 flex flex-center"},{default:(0,t.w5)((()=>[(0,t._)("div",d,[m,(0,t._)("div",g,[(0,t.Wm)(i,{modelValue:e.form.name,"onUpdate:modelValue":a[0]||(a[0]=a=>e.form.name=a),label:"Usuario",type:"text",dark:"",autocomplete:"new-password",autofocus:"","hide-bottom-space":!0},null,8,["modelValue"]),(0,t.Wm)(i,{modelValue:e.form.password,"onUpdate:modelValue":a[2]||(a[2]=a=>e.form.password=a),type:e.isPwd?"password":"text",label:"Contraseña",dark:"",autocomplete:"new-password","hide-bottom-space":!0},{append:(0,t.w5)((()=>[(0,t.Wm)(c,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[1]||(a[1]=a=>e.isPwd=!e.isPwd)},null,8,["name"])])),_:1},8,["modelValue","type"]),(0,t._)("div",p,[(0,t.Wm)(u,{label:"Ingresar",color:"primary",class:"q-mt-lg q-px-sm shadow-3",style:{width:"200px"},onClick:e.ingresar},null,8,["onClick"])]),(0,t._)("div",w,(0,l.zw)(e.appVersion),1)])])])),_:1}))])),_:1})}s(9665);var h=s(6950),f=s(3833),v=s(389),Z=s(7524);class x{constructor(){this.urlAPiExterna=""}async setAuthEncabezado(){const e=JSON.parse(f.Z.getItem("usuario"));let a=!0;try{Z.Z.defaults.headers.common.authorization=`Bearer ${e.accessToken}`}catch(s){console.error(s.message),(0,v.Y8)(s.message),a=!1}return a}async apiLogin(e){let a=null;try{h.Z.show({message:"Ingresando...",messageColor:"info"}),a=await Z.Z.post("/login",e)}catch(s){console.error(s.message),(0,v.au)(s)}finally{h.Z.hide()}return a}async store(e){let a=null;try{h.Z.show({message:"Enviando..",messageColor:"info"}),a=await Z.Z.post("persona",e)}catch(s){console.error(s.message),(0,v.au)(s)}finally{h.Z.hide()}return a}async storeImage(e){let a=null;try{h.Z.show({message:"Guardando foto..",messageColor:"info"}),a=await Z.Z.post("foto/persona",e)}catch(s){console.error(s.message),(0,v.au)(s)}finally{h.Z.hide()}return a}async getAll(){let e=null;try{h.Z.show({message:"Cargando mienbros..",messageColor:"info"}),e=await Z.Z.get("persona")}catch(a){console.error(a.message),(0,v.au)(a)}finally{h.Z.hide()}return e}async getNovedades(){let e=null;try{h.Z.show({message:"Cargando novedades..",messageColor:"info"}),e=await Z.Z.get("novedades")}catch(a){console.error(a.message),(0,v.au)(a)}finally{h.Z.hide()}return e}async showImageByIdPersona(e){let a=null;try{h.Z.show({message:"Cargando foto..",messageColor:"info"}),a=await Z.Z.get(`foto/persona/${e}`)}catch(s){console.error(s.message),(0,v.au)(s)}finally{h.Z.hide()}return a}async update(e,a){let s=null;try{h.Z.show({message:"Enviando...",messageColor:"info"}),s=await Z.Z.put(`evento/${a}`,e)}catch(t){console.error(t.message),(0,v.au)(t)}finally{h.Z.hide()}return s}async destroy(e){let a=null;try{h.Z.show({message:"Eliminando...",messageColor:"info"}),a=await Z.Z["delete"](`evento/${e}`),(0,v.St)(a.data.mensaje,a.statusText)}catch(s){console.error(s.message),(0,v.au)(s)}finally{h.Z.hide()}return a}async vincular(e,a){let s=null;try{h.Z.show({message:"Vinculando...",messageColor:"info"}),s=await Z.Z.post(`vincular/evento/${a}`,e),(0,v.St)(s.data.mensaje,s.statusText)}catch(t){console.error(t.message),(0,v.au)(t)}finally{h.Z.hide()}return s}async updateVinculoPersona(e,a){let s=null;try{h.Z.show({message:"Vinculando...",messageColor:"info"}),s=await Z.Z.put(`vincular/evento/persona/${a}`,e),(0,v.St)(s.data.mensaje,s.statusText)}catch(t){console.error(t.message),(0,v.au)(t)}finally{h.Z.hide()}return s}async getEventosCompletos(){let e=null;try{h.Z.show({message:"Cargando eventos...",messageColor:"info"}),e=await Z.Z.get("eventos/completos")}catch(a){console.error(a.message),(0,v.au)(a)}finally{h.Z.hide()}return e}async getEventosByPersona(e){let a=null;try{h.Z.show({message:"Cargando eventos...",messageColor:"info"}),a=await Z.Z.get(`eventos/persona/${e}`)}catch(s){console.error(s.message),(0,v.au)(s)}finally{h.Z.hide()}return a}async getEventos(){let e=null;try{h.Z.show({message:"Cargando eventos...",messageColor:"info"}),e=await Z.Z.get("evento"),(0,v.St)(e.data.mensaje,e.statusText)}catch(a){console.error(a.message),(0,v.au)(a)}finally{h.Z.hide()}return e}async getEvento(e){let a=null;try{h.Z.show({message:"Cargando eventos...",messageColor:"info"}),a=await Z.Z.get(`evento/${e}`),(0,v.St)(a.data.mensaje,a.statusText)}catch(s){console.error(s.message),(0,v.au)(s)}finally{h.Z.hide()}return a}async getTiempoByEventoID(e){let a=null;try{h.Z.show({message:"Cargando tiempo...",messageColor:"info"}),a=await Z.Z.get(`evento/${e}/tiempo`),(0,v.St)(a.data.mensaje,a.statusText)}catch(s){console.error(s.message),(0,v.au)(s)}finally{h.Z.hide()}return a}async getUbicacionByEventoID(e){let a=null;try{h.Z.show({message:"Cargando ubicacion...",messageColor:"info"}),a=await Z.Z.get(`evento/${e}/ubicacion`),(0,v.St)(a.data.mensaje,a.statusText)}catch(s){console.error(s.message),(0,v.au)(s)}finally{h.Z.hide()}return a}async getPersonaByEventoID(e){let a=null;try{h.Z.show({message:"Cargando persona...",messageColor:"info"}),a=await Z.Z.get(`evento/${e}/persona`),(0,v.St)(a.data.mensaje,a.statusText)}catch(s){console.error(s.message),(0,v.au)(s)}finally{h.Z.hide()}return a}}const b=new x,C=b;var q=s(499),_=s(4482),I=s(8339),k=s(7322),j=s(3331),V=s(1820);async function L(){const e=await C.getNovedades(),a=e.data;try{h.Z.show({message:"Migrando...",messageColor:"info"}),await j.Z.migrar(a.personas),await V.Z.migrar(a.estados),f.Z.set("IncioDelDia",a.viajeIniciado?1:0)}catch(s){console.error(s),(0,v.Y8)(s)}finally{h.Z.hide()}}const S={migrar:L},E=(0,t.aZ)({name:"Login_Desktop",components:{},setup(e,a){const s=(0,q.iH)(_.q),o=(0,I.tv)(),n=(0,q.iH)({name:"",password:""}),r=(0,q.iH)(!0),l=(0,q.iH)(!1);function i(){return(0,k.x)(n.value.name)?((0,v.Y8)("Ingresá tu usuario"),!1):!(0,k.x)(n.value.password)||((0,v.Y8)("Ingresá tu contraseña"),!1)}async function c(){if(!i())return;const e=await C.apiLogin(n.value);e&&(localStorage.setItem("usuario",JSON.stringify(e.data)),C.setAuthEncabezado(e.data.accessToken),await S.migrar(),o.push({name:"show"}).catch((()=>{(0,v.St)("Conectado")})))}return(0,t.bv)((async()=>{l.value=!1})),{isLoading:l,appVersion:s,form:n,isPwd:r,ingresar:c}}});var P=s(1639),T=s(7605),D=s(3119),$=s(2857),W=s(8879),H=s(9984),Q=s.n(H);const B=(0,P.Z)(E,[["render",y],["__scopeId","data-v-17ace55e"]]),M=B;Q()(E,"components",{QLayout:T.Z,QInput:D.Z,QIcon:$.Z,QBtn:W.Z});const U=e=>((0,t.dD)("data-v-52e0a277"),e=e(),(0,t.Cn)(),e),z={class:"q-pa-none q-ma-none q-pt-md"},Y=U((()=>(0,t._)("div",{class:"shadow-6 q-py-md bg-grey-3 jg-border-radius-2"},[(0,t._)("div",{class:"text-center text-grey-9 text-weight-bolder"},[(0,t._)("img",{src:c(),style:{width:"240px"}}),(0,t._)("div",{class:"jg-text-18 text-bold q-mt-md"}," Santuario Mundial de los Milagros ")])],-1))),A={class:"div-1 q-mb-sm q-mb-lg jg-border-radius-2 q-mt-sm"},F={class:"col-12 text-center"},N={class:"text-caption text-center text-grey-3 q-mt-xs text-weight-light q-pt-sm"};function J(e,a,s,o,n,r){const i=(0,t.up)("q-input"),c=(0,t.up)("q-icon"),u=(0,t.up)("q-btn"),d=(0,t.up)("q-layout");return(0,t.wg)(),(0,t.j4)(d,null,{default:(0,t.w5)((()=>[e.isLoading?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(d,{key:0,class:"bg-caja shadow-20 flex flex-center"},{default:(0,t.w5)((()=>[(0,t._)("div",z,[Y,(0,t._)("div",A,[(0,t.Wm)(i,{modelValue:e.form.name,"onUpdate:modelValue":a[0]||(a[0]=a=>e.form.name=a),label:"Usuario",type:"text",dark:"",autocomplete:"new-password",autofocus:"","hide-bottom-space":!0,onInput:a[1]||(a[1]=a=>e.mailError=!1)},null,8,["modelValue"]),(0,t.Wm)(i,{modelValue:e.form.password,"onUpdate:modelValue":a[3]||(a[3]=a=>e.form.password=a),type:e.isPwd?"password":"text",label:"Contraseña",dark:"",autocomplete:"new-password","hide-bottom-space":!0,onInput:a[4]||(a[4]=a=>e.passError=!1)},{append:(0,t.w5)((()=>[(0,t.Wm)(c,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[2]||(a[2]=a=>e.isPwd=!e.isPwd)},null,8,["name"])])),_:1},8,["modelValue","type"]),(0,t._)("div",F,[(0,t.Wm)(u,{label:"Ingresar",color:"primary",class:"q-mt-lg q-px-sm shadow-3",style:{width:"200px"},onClick:e.ingresar},null,8,["onClick"])]),(0,t._)("div",N,(0,l.zw)(e.appVersion),1)])])])),_:1}))])),_:1})}const O=(0,t.aZ)({name:"Login_Desktop",components:{},setup(e,a){const s=(0,q.iH)(_.q),o=(0,I.tv)(),n=(0,q.iH)({name:"",password:""}),r=(0,q.iH)(!0),l=(0,q.iH)(!1);function i(){return(0,k.x)(n.value.name)?((0,v.Y8)("Ingresá tu usuario"),!1):!(0,k.x)(n.value.password)||((0,v.Y8)("Ingresá tu contraseña"),!1)}async function c(){if(!i())return;const e=await C.apiLogin(n.value);e&&(localStorage.setItem("usuario",JSON.stringify(e.data)),C.setAuthEncabezado(e.data.accessToken),await S.migrar(),o.push({name:"show"}).catch((()=>{(0,v.St)("Conectado")})))}return(0,t.bv)((async()=>{l.value=!1})),{isLoading:l,appVersion:s,form:n,isPwd:r,ingresar:c}}}),G=(0,P.Z)(O,[["render",J],["__scopeId","data-v-52e0a277"]]),K=G;Q()(O,"components",{QLayout:T.Z,QInput:D.Z,QIcon:$.Z,QBtn:W.Z});const R=(0,t.aZ)({name:"Login",components:{LoginFormMobile:K,LoginFormDesktop:M},setup(e,a){(0,I.tv)();return(0,t.bv)((async()=>{})),{}}}),X=(0,P.Z)(R,[["render",r]]),ee=X;Q()(R,"components",{QLayout:T.Z})}}]);