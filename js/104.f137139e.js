"use strict";(globalThis["webpackChunkquasar_project"]=globalThis["webpackChunkquasar_project"]||[]).push([[104],{204:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ie});var s=a(9835);const o={class:"fit"};function l(e,t,a,l,n,r){const i=(0,s.up)("PersonasList"),c=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(c,null,{default:(0,s.w5)((()=>[(0,s._)("div",o,[(0,s.Wm)(i)])])),_:1})}var n=a(6970),r=a(9742),i=a.n(r);const c={overline:"",class:"row jg-border-radius-2 bg-blue-2 q-px-md justify-between q-mx-none q-mt-xs shadow-3"},d={class:"q-py-sm"},u={class:"row items-center"},m={class:"row items-center"},w={class:"row items-center full-width"},p={class:"col q-pr-md"},g=(0,s._)("div",{class:"absolute-full flex flex-center bg-negative text-white"}," Cannot load image ",-1),f={class:"col-9 q-px-none"},x={key:0},h=(0,s._)("span",{class:"text-grey-7 q-pr-xs"},"Estado:",-1),_={class:"col text-green-5 text-bold"},q={key:1},v=(0,s._)("span",{class:"text-grey-7 q-pr-xs"},"Estado:",-1),y={class:"col text-red-5 text-bold"},k={key:2},b=(0,s._)("span",{class:"text-grey-7 q-pr-xs"},"Estado:",-1),L={class:"col text-grey-8 text-bold"},C={key:3,class:"col text-right text-purple-5 text-bold"},Z={class:"text-weight-medium q-pr-sm"},z={class:"text-grey-6 q-pr-xs"},W={class:"text-grey-6"},S={class:"text-grey-6 q-pl-xs"},j={key:0},I={key:0};function D(e,t,a,o,l,r){const D=(0,s.up)("q-badge"),Q=(0,s.up)("q-tooltip"),R=(0,s.up)("q-icon"),T=(0,s.up)("q-input"),E=(0,s.up)("q-img"),U=(0,s.up)("q-item-label"),F=(0,s.up)("q-item-section"),N=(0,s.up)("q-item"),P=(0,s.up)("q-slide-item"),A=(0,s.up)("q-virtual-scroll"),M=(0,s.up)("q-page");return e.isReady?((0,s.wg)(),(0,s.j4)(M,{key:0,class:"q-px-sm bg-grey-3"},{default:(0,s.w5)((()=>[(0,s._)("div",c,[(0,s._)("div",d,[(0,s.Uk)(" Miembros "),(0,s.Wm)(D,{color:"primary",class:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(e.personasList.length),1)])),_:1}),e.searchText?((0,s.wg)(),(0,s.j4)(D,{key:0,color:"secondary",class:"q-ml-xs"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(e.personasFilteredOut.length),1)])),_:1})):(0,s.kq)("",!0)]),(0,s._)("div",null,[(0,s.Wm)(R,{name:"download",onClick:e.onDownloadClick,class:"cursor-pointer q-py-sm q-mr-sm text-green-9",size:"sm"},{default:(0,s.w5)((()=>[(0,s.Wm)(Q,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Exportar")])),_:1})])),_:1},8,["onClick"]),(0,s.Wm)(R,{name:"refresh",onClick:e.onRefreshList,class:"cursor-pointer q-py-sm",color:"blue-9",size:"sm"},{default:(0,s.w5)((()=>[(0,s.Wm)(Q,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Refrescar")])),_:1})])),_:1},8,["onClick"])])]),(0,s.Wm)(T,{modelValue:e.searchText,"onUpdate:modelValue":t[0]||(t[0]=t=>e.searchText=t),dense:"",flat:"",clearable:"",rounded:"",placeholder:"Buscar..",class:"fit q-mt-xs q-px-xs text-black q-mx-none",style:{padding:"0px !important"},standout:"bg-blue-10 "},{append:(0,s.w5)((()=>[(0,s.Wm)(R,{name:"search"})])),_:1},8,["modelValue"]),(0,s.Wm)(A,{items:e.personasFilteredOut,"virtual-scroll-slice-size":15,style:{height:"75vh !important"},class:"q-mt-sm"},{default:(0,s.w5)((({item:t})=>[((0,s.wg)(),(0,s.j4)(P,{key:t.id,class:"jg-border-radius q-mb-sm q-mr-sm",onLeft:a=>e.onLeft(a,t),onRight:a=>e.onRight(a,t),onClick:a=>e.onItemClick(t)},{left:(0,s.w5)((()=>[(0,s._)("div",u,[(0,s.Wm)(R,{left:"",name:"visibility"}),(0,s.Uk)(" Mostrar ")])])),right:(0,s.w5)((()=>[(0,s._)("div",m,[(0,s.Uk)(" Modificar "),(0,s.Wm)(R,{right:"",name:"edit"})])])),default:(0,s.w5)((()=>[(0,s.Wm)(N,{class:"bg-white"},{default:(0,s.w5)((()=>[(0,s._)("div",w,[(0,s._)("div",p,[(0,s.Wm)(E,{alt:"Foto",fit:"scale-down",loading:"lazy",src:t.foto_url,"spinner-color":"green",class:"text-grey-3 q-mr-sm","placeholder-src":i()},{error:(0,s.w5)((()=>[g])),_:2},1032,["src"])]),(0,s._)("div",f,[(0,s.Wm)(F,{class:""},{default:(0,s.w5)((()=>[(0,s.Wm)(U,{class:"text-grey-5 row items-center no-wrap q-mt-xs"},{default:(0,s.w5)((()=>["FIRME"===t.estado?((0,s.wg)(),(0,s.iD)("div",x,[h,(0,s._)("span",_,(0,n.zw)(t.estado),1)])):"ABANDONO"===t.estado?((0,s.wg)(),(0,s.iD)("div",q,[v,(0,s._)("span",y,(0,n.zw)(t.estado),1)])):((0,s.wg)(),(0,s.iD)("div",k,[b,(0,s._)("span",L,(0,n.zw)(t.estado),1)])),t.iglesia?((0,s.wg)(),(0,s.iD)("span",C,(0,n.zw)(t.iglesia),1)):(0,s.kq)("",!0)])),_:2},1024),(0,s.Wm)(U,{class:"row items-center text-uppercase no-wrap q-mt-xs"},{default:(0,s.w5)((()=>[(0,s._)("span",Z,(0,n.zw)(t.nombre)+" "+(0,n.zw)(t.apellido),1),(0,s._)("span",z,"("+(0,n.zw)(t.edad||"?")+")",1),(0,s._)("span",W," ("+(0,n.zw)(t.sexo?t.sexo.codigo:"-")+")",1),(0,s._)("span",S,[t.bautizado?((0,s.wg)(),(0,s.j4)(R,{key:0,color:"green-8",name:"done"})):(0,s.kq)("",!0)])])),_:2},1024),(0,s.Wm)(U,{caption:"",class:"row justify-between items-center"},{default:(0,s.w5)((()=>[(0,s._)("span",null,[(0,s.Wm)(R,{name:"place",class:"q-mr-none"}),(0,s.Uk)(" "+(0,n.zw)(t.direccion||"No ingresada"),1)])])),_:2},1024),(0,s.Wm)(U,{class:"row justify-between items-center text-grey-6"},{default:(0,s.w5)((()=>[(0,s._)("span",null,"Telfono: "+(0,n.zw)(t.telefono),1),t.fecha_ingreso?((0,s.wg)(),(0,s.iD)("span",j,"Fecha de ingreso: "+(0,n.zw)(t.fecha_ingreso),1)):(0,s.kq)("",!0)])),_:2},1024),(0,s.Wm)(U,{class:"row justify-between items-center text-grey-6"},{default:(0,s.w5)((()=>[t.email?((0,s.wg)(),(0,s.iD)("span",I,"Correo: "+(0,n.zw)(t.email),1)):(0,s.kq)("",!0)])),_:2},1024)])),_:2},1024)])])])),_:2},1024)])),_:2},1032,["onLeft","onRight","onClick"]))])),_:1},8,["items"])])),_:1})):(0,s.kq)("",!0)}a(9665);var Q=a(499),R=a(9302),T=a(8339),E=a(850),U=a(1033),F=a(2850),N=a(389),P=a(3331),A=a(9357);const M=(0,s.aZ)({name:"Persona_List",components:{PersonaInputs:E.Z},props:{},setup(){(0,R.Z)();const e=(0,Q.iH)(!1),t=(0,T.tv)();let a;const o=(0,Q.iH)([]),l=(0,Q.iH)(null),n=(0,s.Fl)((()=>{let e=l.value?r():o.value;return e}));function r(){return o.value.filter((e=>e.nombre&&e.nombre.toLowerCase().includes(l.value.toString().toLowerCase())||e.apellido&&e.apellido.toLowerCase().includes(l.value.toString().toLowerCase())||e.edad&&e.edad.toLowerCase().includes(l.value.toString().toLowerCase())||e.email&&e.email.toLowerCase().includes(l.value.toString().toLowerCase())||e.direccion&&e.direccion.toLowerCase().includes(l.value.toString().toLowerCase())||e.iglesia&&e.iglesia.toLowerCase().includes(l.value.toString().toLowerCase())||e.estado&&e.estado.toLowerCase().includes(l.value.toString().toLowerCase())||e.telefono&&e.telefono.toString().toLowerCase().includes(l.value.toString().toLowerCase())))}function i(e){a=setTimeout((()=>{e()}),1e3)}function c({reset:e},a){a.saveLocalStorage(),i(e),t.push({name:"details"}).catch((()=>{}))}function d({reset:e},a){a.saveLocalStorage(),i(e),t.push({name:"edit"}).catch((()=>{}))}function u(e){e.saveLocalStorage(),t.push({name:"details"}).catch((()=>{}))}async function m(){await U.Z.setAuthEncabezado();const e=await U.Z.getAll();e&&(await P.Z.migrar(e.data),await w())}async function w(){const e=await P.Z.getAllFiltrado("EN REVISION");o.value=[];for(let t=0;t<e.length;t++){let a=e[t];a.id=a.id_persona;const s=new F.Z;await s.cargarDatos(a),o.value.push(s)}}async function p(){await m()}async function g(){const e=await P.Z.getAll();if(0===e.length)return void(0,N.Y8)("No hay datos para exportar");let t=[];for(var a in e[0])t.push({field:a,filter:"text",filterable:!0,orden:"1",title:a,width:"200"});(0,A.saveExcel)({fileName:`SantuarioMundialDeLosMilagros Registro de personas - ${new Date}`,data:e,columns:t})}return(0,s.bv)((async()=>{await w(),e.value=!0})),(0,s.Jd)((()=>{clearTimeout(a)})),{onLeft:c,onRight:d,onItemClick:u,onRefreshList:p,onDownloadClick:g,isReady:e,personasList:o,personasFilteredOut:n,searchText:l}}});var O=a(1639),V=a(9885),B=a(990),H=a(2857),J=a(6858),Y=a(3119),$=a(8978),G=a(8713),K=a(490),X=a(335),ee=a(1233),te=a(3115),ae=a(9984),se=a.n(ae);const oe=(0,O.Z)(M,[["render",D]]),le=oe;se()(M,"components",{QPage:V.Z,QBadge:B.Z,QIcon:H.Z,QTooltip:J.Z,QInput:Y.Z,QVirtualScroll:$.Z,QSlideItem:G.Z,QItem:K.Z,QImg:X.Z,QItemSection:ee.Z,QItemLabel:te.Z});const ne=(0,s.aZ)({name:"PersonaShow",components:{PersonasList:le}}),re=(0,O.Z)(ne,[["render",l]]),ie=re;se()(ne,"components",{QPage:V.Z})}}]);