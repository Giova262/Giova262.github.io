"use strict";(globalThis["webpackChunkquasar_project"]=globalThis["webpackChunkquasar_project"]||[]).push([[222],{222:(e,a,t)=>{t.r(a),t.d(a,{default:()=>ie});var s=t(9835);const o={class:"lt-sm contenedor"},n={class:"gt-xs contenedor"};function r(e,a,t,r,l,i){const c=(0,s.up)("LoginFormMobile"),d=(0,s.up)("LoginFormDesktop"),u=(0,s.up)("q-layout");return(0,s.wg)(),(0,s.j4)(u,{view:"lHh Lpr lFf",class:"bg-white"},{default:(0,s.w5)((()=>[(0,s._)("div",o,[(0,s.Wm)(c)]),(0,s._)("div",n,[(0,s.Wm)(d)])])),_:1})}var l=t(6970),i=t(213),c=t.n(i);const d=e=>((0,s.dD)("data-v-15d0291c"),e=e(),(0,s.Cn)(),e),u={class:"q-pa-none q-ma-none q-pt-md"},m=d((()=>(0,s._)("div",{class:"shadow-6 q-py-md bg-grey-3 jg-border-radius-2"},[(0,s._)("div",{class:"text-center text-grey-9 text-weight-bolder"},[(0,s._)("img",{src:c(),style:{width:"240px"}}),(0,s._)("div",{class:"jg-text-18 text-bold q-mt-md"}," Santuario Mundial de los Milagros ")])],-1))),g={class:"div-1 q-mb-sm q-mb-lg jg-border-radius-2 q-mt-sm"},p={class:"col-12 text-center"},w={class:"text-caption text-center text-grey-2 q-mt-xs text-weight-light q-pt-sm"};function y(e,a,t,o,n,r){const i=(0,s.up)("q-input"),c=(0,s.up)("q-icon"),d=(0,s.up)("q-btn"),y=(0,s.up)("q-layout");return(0,s.wg)(),(0,s.j4)(y,null,{default:(0,s.w5)((()=>[e.isLoading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(y,{key:0,class:"bg-caja shadow-20 flex flex-center"},{default:(0,s.w5)((()=>[(0,s._)("div",u,[m,(0,s._)("div",g,[(0,s.Wm)(i,{modelValue:e.form.name,"onUpdate:modelValue":a[0]||(a[0]=a=>e.form.name=a),label:"Usuario",type:"text",dark:"",autocomplete:"new-password",autofocus:"","hide-bottom-space":!0},null,8,["modelValue"]),(0,s.Wm)(i,{modelValue:e.form.password,"onUpdate:modelValue":a[2]||(a[2]=a=>e.form.password=a),type:e.isPwd?"password":"text",label:"Contraseña",dark:"",autocomplete:"new-password","hide-bottom-space":!0},{append:(0,s.w5)((()=>[(0,s.Wm)(c,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[1]||(a[1]=a=>e.isPwd=!e.isPwd)},null,8,["name"])])),_:1},8,["modelValue","type"]),(0,s._)("div",p,[(0,s.Wm)(d,{label:"Ingresar",color:"primary",class:"q-mt-lg q-px-sm shadow-3",style:{width:"200px"},onClick:e.ingresar},null,8,["onClick"])]),(0,s._)("div",w,(0,l.zw)(e.appVersion),1)])])])),_:1}))])),_:1})}t(9665);var h=t(6950),f=t(3833),v=t(389),Z=t(7524);class b{constructor(){this.urlAPiExterna=""}async setAuthEncabezado(){const e=JSON.parse(f.Z.getItem("usuario"));let a=!0;try{Z.Z.defaults.headers.common.authorization=`Bearer ${e.accessToken}`}catch(t){console.error(t.message),(0,v.Y8)(t.message),a=!1}return a}async apiLogin(e){let a=null;try{h.Z.show({message:"Ingresando...",messageColor:"info"}),a=await Z.Z.post("/login",e)}catch(t){console.error(t.message),(0,v.au)(t)}finally{h.Z.hide()}return a}async store(e){let a=null;try{h.Z.show({message:"Enviando..",messageColor:"info"}),a=await Z.Z.post("persona",e)}catch(t){console.error(t.message),(0,v.au)(t)}finally{h.Z.hide()}return a}async storeImage(e){let a=null;try{h.Z.show({message:"Guardando foto..",messageColor:"info"}),a=await Z.Z.post("foto/persona",e)}catch(t){console.error(t.message),(0,v.au)(t)}finally{h.Z.hide()}return a}async getAll(){let e=null;try{h.Z.show({message:"Cargando mienbros..",messageColor:"info"}),e=await Z.Z.get("persona")}catch(a){console.error(a.message),(0,v.au)(a)}finally{h.Z.hide()}return e}async getNovedades(){let e=null;try{h.Z.show({message:"Cargando novedades..",messageColor:"info"}),e=await Z.Z.get("novedades")}catch(a){console.error(a.message),(0,v.au)(a)}finally{h.Z.hide()}return e}async showImageByIdPersona(e){let a=null;try{h.Z.show({message:"Cargando foto..",messageColor:"info"}),a=await Z.Z.get(`foto/persona/${e}`)}catch(t){console.error(t.message),(0,v.au)(t)}finally{h.Z.hide()}return a}async update(e,a){let t=null;try{h.Z.show({message:"Enviando...",messageColor:"info"}),t=await Z.Z.put(`evento/${a}`,e)}catch(s){console.error(s.message),(0,v.au)(s)}finally{h.Z.hide()}return t}async destroy(e){let a=null;try{h.Z.show({message:"Eliminando...",messageColor:"info"}),a=await Z.Z["delete"](`evento/${e}`),(0,v.St)(a.data.mensaje,a.statusText)}catch(t){console.error(t.message),(0,v.au)(t)}finally{h.Z.hide()}return a}async vincular(e,a){let t=null;try{h.Z.show({message:"Vinculando...",messageColor:"info"}),t=await Z.Z.post(`vincular/evento/${a}`,e),(0,v.St)(t.data.mensaje,t.statusText)}catch(s){console.error(s.message),(0,v.au)(s)}finally{h.Z.hide()}return t}async updateVinculoPersona(e,a){let t=null;try{h.Z.show({message:"Vinculando...",messageColor:"info"}),t=await Z.Z.put(`vincular/evento/persona/${a}`,e),(0,v.St)(t.data.mensaje,t.statusText)}catch(s){console.error(s.message),(0,v.au)(s)}finally{h.Z.hide()}return t}async getEventosCompletos(){let e=null;try{h.Z.show({message:"Cargando eventos...",messageColor:"info"}),e=await Z.Z.get("eventos/completos")}catch(a){console.error(a.message),(0,v.au)(a)}finally{h.Z.hide()}return e}async getEventosByPersona(e){let a=null;try{h.Z.show({message:"Cargando eventos...",messageColor:"info"}),a=await Z.Z.get(`eventos/persona/${e}`)}catch(t){console.error(t.message),(0,v.au)(t)}finally{h.Z.hide()}return a}async getEventos(){let e=null;try{h.Z.show({message:"Cargando eventos...",messageColor:"info"}),e=await Z.Z.get("evento"),(0,v.St)(e.data.mensaje,e.statusText)}catch(a){console.error(a.message),(0,v.au)(a)}finally{h.Z.hide()}return e}async getEvento(e){let a=null;try{h.Z.show({message:"Cargando eventos...",messageColor:"info"}),a=await Z.Z.get(`evento/${e}`),(0,v.St)(a.data.mensaje,a.statusText)}catch(t){console.error(t.message),(0,v.au)(t)}finally{h.Z.hide()}return a}async getTiempoByEventoID(e){let a=null;try{h.Z.show({message:"Cargando tiempo...",messageColor:"info"}),a=await Z.Z.get(`evento/${e}/tiempo`),(0,v.St)(a.data.mensaje,a.statusText)}catch(t){console.error(t.message),(0,v.au)(t)}finally{h.Z.hide()}return a}async getUbicacionByEventoID(e){let a=null;try{h.Z.show({message:"Cargando ubicacion...",messageColor:"info"}),a=await Z.Z.get(`evento/${e}/ubicacion`),(0,v.St)(a.data.mensaje,a.statusText)}catch(t){console.error(t.message),(0,v.au)(t)}finally{h.Z.hide()}return a}async getPersonaByEventoID(e){let a=null;try{h.Z.show({message:"Cargando persona...",messageColor:"info"}),a=await Z.Z.get(`evento/${e}/persona`),(0,v.St)(a.data.mensaje,a.statusText)}catch(t){console.error(t.message),(0,v.au)(t)}finally{h.Z.hide()}return a}}const x=new b,C=x;var q=t(499),_=t(4482),I=t(8339),j=t(7322),k=t(3331),V=t(4476);async function E(e){await V.Z.estados.clear().then((function(){console.log("Tabla estados borrada exitosamente")})).catch(alert);for await(let a of e)L(a)}async function L(e){return await V.Z.estados.add({descripcion:e})}async function S(){return await V.Z.estados.toArray()}async function D(e){return await V.Z.estados.where("descripcion").notEqual(e).toArray()}async function P(e){return await V.Z.estados.get({descripcion:e})}async function T(e,a){const t=await P(e);return t.descripcion!=a&&(await V.Z.estados.where({descripcion:e}).modify({descripcion:a}).then((function(e){console.log("Updated "+e+" items")})),!0)}async function B(e){let a=null;return await V.Z.estados.where({descripcion:e}).delete().then((function(e){console.log("Deleted "+e+" objects"),a=!0})),a}const $={migrar:E,getAll:S,getByDesc:P,deleteByID:B,updateEstadoByID:T,getAllFiltrado:D};async function W(){const e=await C.getNovedades(),a=e.data;console.log("novedades"),console.log(a);try{h.Z.show({message:"Migrando...",messageColor:"info"}),await k.Z.migrar(a.personas),await $.migrar(a.estados),f.Z.set("IncioDelDia",a.viajeIniciado?1:0)}catch(t){console.log(t),(0,v.Y8)(t)}finally{h.Z.hide()}}const A={migrar:W},H=(0,s.aZ)({name:"Login_Desktop",components:{},setup(e,a){const t=(0,q.iH)(_.q),o=(0,I.tv)(),n=(0,q.iH)({name:"",password:""}),r=(0,q.iH)(!0),l=(0,q.iH)(!1);function i(){return(0,j.x)(n.value.name)?((0,v.Y8)("Ingresá tu usuario"),!1):!(0,j.x)(n.value.password)||((0,v.Y8)("Ingresá tu contraseña"),!1)}async function c(){if(!i())return;const e=await C.apiLogin(n.value);e&&(localStorage.setItem("usuario",JSON.stringify(e.data)),C.setAuthEncabezado(e.data.accessToken),await A.migrar(),o.push({name:"index"}).catch((()=>{(0,v.St)("Conectado")})))}return(0,s.bv)((async()=>{l.value=!1})),{isLoading:l,appVersion:t,form:n,isPwd:r,ingresar:c}}});var Q=t(1639),U=t(7605),M=t(3119),z=t(2857),F=t(8879),Y=t(9984),N=t.n(Y);const J=(0,Q.Z)(H,[["render",y],["__scopeId","data-v-15d0291c"]]),O=J;N()(H,"components",{QLayout:U.Z,QInput:M.Z,QIcon:z.Z,QBtn:F.Z});const G=e=>((0,s.dD)("data-v-6d437b0c"),e=e(),(0,s.Cn)(),e),K={class:"q-pa-none q-ma-none q-pt-md"},R=G((()=>(0,s._)("div",{class:"shadow-6 q-py-md bg-grey-3 jg-border-radius-2"},[(0,s._)("div",{class:"text-center text-grey-9 text-weight-bolder"},[(0,s._)("img",{src:c(),style:{width:"240px"}}),(0,s._)("div",{class:"jg-text-18 text-bold q-mt-md"}," Santuario Mundial de los Milagros ")])],-1))),X={class:"div-1 q-mb-sm q-mb-lg jg-border-radius-2 q-mt-sm"},ee={class:"col-12 text-center"},ae={class:"text-caption text-center text-grey-3 q-mt-xs text-weight-light q-pt-sm"};function te(e,a,t,o,n,r){const i=(0,s.up)("q-input"),c=(0,s.up)("q-icon"),d=(0,s.up)("q-btn"),u=(0,s.up)("q-layout");return(0,s.wg)(),(0,s.j4)(u,null,{default:(0,s.w5)((()=>[e.isLoading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(u,{key:0,class:"bg-caja shadow-20 flex flex-center"},{default:(0,s.w5)((()=>[(0,s._)("div",K,[R,(0,s._)("div",X,[(0,s.Wm)(i,{modelValue:e.form.name,"onUpdate:modelValue":a[0]||(a[0]=a=>e.form.name=a),label:"Usuario",type:"text",dark:"",autocomplete:"new-password",autofocus:"","hide-bottom-space":!0,onInput:a[1]||(a[1]=a=>e.mailError=!1)},null,8,["modelValue"]),(0,s.Wm)(i,{modelValue:e.form.password,"onUpdate:modelValue":a[3]||(a[3]=a=>e.form.password=a),type:e.isPwd?"password":"text",label:"Contraseña",dark:"",autocomplete:"new-password","hide-bottom-space":!0,onInput:a[4]||(a[4]=a=>e.passError=!1)},{append:(0,s.w5)((()=>[(0,s.Wm)(c,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[2]||(a[2]=a=>e.isPwd=!e.isPwd)},null,8,["name"])])),_:1},8,["modelValue","type"]),(0,s._)("div",ee,[(0,s.Wm)(d,{label:"Ingresar",color:"primary",class:"q-mt-lg q-px-sm shadow-3",style:{width:"200px"},onClick:e.ingresar},null,8,["onClick"])]),(0,s._)("div",ae,(0,l.zw)(e.appVersion),1)])])])),_:1}))])),_:1})}const se=(0,s.aZ)({name:"Login_Desktop",components:{},setup(e,a){const t=(0,q.iH)(_.q),o=(0,I.tv)(),n=(0,q.iH)({name:"",password:""}),r=(0,q.iH)(!0),l=(0,q.iH)(!1);function i(){return(0,j.x)(n.value.name)?((0,v.Y8)("Ingresá tu usuario"),!1):!(0,j.x)(n.value.password)||((0,v.Y8)("Ingresá tu contraseña"),!1)}async function c(){if(!i())return;const e=await C.apiLogin(n.value);e&&(localStorage.setItem("usuario",JSON.stringify(e.data)),C.setAuthEncabezado(e.data.accessToken),await A.migrar(),o.push({name:"index"}).catch((()=>{(0,v.St)("Conectado")})))}return(0,s.bv)((async()=>{l.value=!1})),{isLoading:l,appVersion:t,form:n,isPwd:r,ingresar:c}}}),oe=(0,Q.Z)(se,[["render",te],["__scopeId","data-v-6d437b0c"]]),ne=oe;N()(se,"components",{QLayout:U.Z,QInput:M.Z,QIcon:z.Z,QBtn:F.Z});const re=(0,s.aZ)({name:"Login",components:{LoginFormMobile:ne,LoginFormDesktop:O},setup(e,a){(0,I.tv)();return(0,s.bv)((async()=>{})),{}}}),le=(0,Q.Z)(re,[["render",r]]),ie=le;N()(re,"components",{QLayout:U.Z})}}]);